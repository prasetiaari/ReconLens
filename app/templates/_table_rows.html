{# --- ROWS --- #}
{% for line in rows %}
<tr class="border-b last:border-0">
  <td class="p-3 font-mono text-[13px] whitespace-nowrap overflow-hidden text-ellipsis">
    {{ line }}
  </td>
</tr>
{% endfor %}

{# --- Pager builder (macro-like via include) --- #}
{% macro pager(where_id) %}
<div id="{{ where_id }}" hx-swap-oob="true" class="mt-3 flex flex-wrap gap-1 items-center">
  {# Prev #}
  {% if has_prev %}
    <button class="px-3 py-1.5 rounded-lg bg-slate-200 hover:bg-slate-300"
            hx-get="/targets/{{ scope }}/{{ module }}/rows?page={{ page-1 }}&page_size={{ page_size }}{% if q %}&q={{ q|urlencode }}{% endif %}"
            hx-target="#rows" hx-swap="innerHTML">
      ‹ Prev
    </button>
  {% else %}
    <span class="px-3 py-1.5 rounded-lg bg-slate-100 text-slate-400">‹ Prev</span>
  {% endif %}

  {# Numbers window #}
  {% for p in pages %}
    {% if p == page %}
      <span class="px-3 py-1.5 rounded-lg bg-slate-900 text-white font-medium">{{ p }}</span>
    {% else %}
      <button class="px-3 py-1.5 rounded-lg bg-slate-200 hover:bg-slate-300"
              hx-get="/targets/{{ scope }}/{{ module }}/rows?page={{ p }}&page_size={{ page_size }}{% if q %}&q={{ q|urlencode }}{% endif %}"
              hx-target="#rows" hx-swap="innerHTML">
        {{ p }}
      </button>
    {% endif %}
  {% endfor %}

  {# Next #}
  {% if has_next %}
    <button class="px-3 py-1.5 rounded-lg bg-slate-200 hover:bg-slate-300"
            hx-get="/targets/{{ scope }}/{{ module }}/rows?page={{ page+1 }}&page_size={{ page_size }}{% if q %}&q={{ q|urlencode }}{% endif %}"
            hx-target="#rows" hx-swap="innerHTML">
      Next ›
    </button>
  {% else %}
    <span class="px-3 py-1.5 rounded-lg bg-slate-100 text-slate-400">Next ›</span>
  {% endif %}

  <span class="ml-2 text-xs text-slate-500">Page {{ page }} / {{ total_pages }}</span>
</div>
{% endmacro %}

{# 🔝 Inject pager TOP #}
{{ pager("pager-top") }}

{# 🔚 Inject pager BOTTOM #}
{{ pager("pager-bottom") }}
