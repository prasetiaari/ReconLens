{% extends "base.html" %}
{% block title %}{{ scope }} / {{ module }} · Viewer{% endblock %}
{% block content %}
<h1 class="text-xl font-semibold mb-4">{{ scope }} / {{ module }}</h1>

<form class="flex items-center gap-3 mb-3"
      hx-get="/targets/{{ scope }}/{{ module }}/rows"
      hx-target="#rows" hx-swap="innerHTML">
  <input type="hidden" name="page" value="{{ page }}">
  <input type="text" name="q" value="{{ q }}" placeholder="filter (substring)"
         class="px-3 py-2 rounded-lg border border-slate-300 w-64">
  <select name="page_size" class="px-2 py-2 rounded-lg border border-slate-300">
    {% for s in [50,100,200,500] %}
      <option value="{{ s }}" {% if s == page_size %}selected{% endif %}>{{ s }}/page</option>
    {% endfor %}
  </select>
  <button class="px-3 py-2 rounded-lg bg-slate-900 text-white" type="submit">Apply</button>
  <span class="text-sm text-slate-500">{{ total }} total</span>
</form>

<!-- 🔝 Pager TOP -->
<div id="pager-top" class="mb-2 flex flex-wrap gap-1 items-center text-sm text-slate-600"></div>

<div class="rounded-xl overflow-hidden bg-white shadow">
  <table class="w-full text-sm">
    <thead class="bg-slate-100 sticky top-[56px]">
      <tr><th class="text-left p-3">URL</th></tr>
    </thead>
    <tbody id="rows"
           hx-get="/targets/{{ scope }}/{{ module }}/rows?page={{ page }}&page_size={{ page_size }}&q={{ q }}"
           hx-trigger="load"
           hx-swap="innerHTML">
      <!-- rows injected -->
    </tbody>
  </table>
</div>

<!-- 🔚 Pager BOTTOM -->
<div id="pager-bottom" class="mt-3 flex flex-wrap gap-1 items-center text-sm text-slate-600"></div>
{% endblock %}
